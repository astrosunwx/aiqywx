# @智能助手http://localhost:3000/config 完整使用指南

## 📱 什么是@智能助手？

**@智能助手** 是企业微信内部群的智能机器人，帮助员工快速处理客户请求、查询信息、管理工单。

**核心特点**：
- 🤖 **必须@才触发**：所有命令都需要 `@智能助手` 开头
- ⚡ **即时响应**：秒级返回结果
- 📝 **自动记录**：所有操作都有日志

---

## 🎯 使用场景分类

### 场景1：员工主动操作（需要@）
✅ 员工想记录客户信息  
✅ 员工想查询项目进度  
✅ 员工想分配工单  
✅ 员工想添加项目联系人

### 场景2：系统自动推送（无需@）
📢 售后工单自动创建（系统推送）  
📢 售前咨询通知（系统推送）  
📢 客户服务请求通知（系统推送）

### 场景3：员工响应推送（需要@）
💬 看到推送后，想进一步操作  
💬 分配工单给同事  
💬 添加客户为联系人  
💬 查询客户详细信息

---

## 📋 完整命令列表

### 1️⃣ 客户管理命令

#### 命令：记录客户
```
@智能助手 #记录客户 手机号13800138000 意向产品空调

🤖自动执行：
✅ 创建售前项目
✅ 记录客户信息
✅ 返回项目ID

🤖回复：
已记录客户 13800138000，创建售前项目ID: 123
```

#### 命令：查询客户进度
```
@智能助手 #查询进度 手机号13800138000

🤖自动执行：
✅ 查询该客户所有项目
✅ 返回项目状态

🤖回复：
手机号 13800138000 的项目进度：
- 项目ID 123: 中央空调安装 (processing)
- 项目ID 124: 售后服务 - 不制冷 (completed)
```

---

### 2️⃣ 工单管理命令

#### 命令：创建工单
```
@智能助手 /创建工单 @客户张三 问题:空调不制冷

🤖自动执行：
✅ 提取客户信息
✅ 创建工单
✅ 推送结构化消息

🤖回复：
工单已创建：SV20240202001
客户：张三
问题：空调不制冷
```

#### 命令：查询工单
```
@智能助手 /查询工单 SV20240202001

🤖回复：
工单号：SV20240202001
客户：张三（13800138000）
问题：空调不制冷
状态：处理中
负责人：李工
创建时间：2024-02-02 14:30
更新时间：2024-02-02 15:00
```

#### 命令：分配工单
```
@智能助手 /分配工单 SV20240202001 @李工

🤖自动执行：
✅ 更新工单负责人
✅ @李工 通知
✅ 推送分配消息

🤖回复：
工单 SV20240202001 已分配给 @李工
```

---

### 3️⃣ 项目联系人管理命令（🆕 新增）

#### 命令：添加项目联系人
```
@智能助手 /添加联系人 项目123 手机13900139000 姓名李四 角色技术负责人

🤖自动执行：
✅ 检查项目是否存在
✅ 添加到 additional_contacts
✅ 更新数据库

🤖回复：
已为项目123添加联系人：
姓名：李四
手机：13900139000
角色：技术负责人

该联系人现在可以查询和提交该项目的售后工单
```

#### 命令：查询项目联系人
```
@智能助手 /查询联系人 项目123

🤖回复：
项目123的联系人：
【主客户】
• 张三（13800138000）- 主客户

【额外联系人】
• 李四（13900139000）- 技术负责人
• 王五（13700137000）- 采购负责人

共3位联系人
```

#### 命令：移除项目联系人
```
@智能助手 /移除联系人 项目123 手机13900139000

🤖自动执行：
✅ 从 additional_contacts 删除
✅ 更新数据库

🤖回复：
已从项目123移除联系人：13900139000
该联系人将无法再查询此项目
```

---

### 4️⃣ 其他管理命令

#### 命令：转接工程师
```
@智能助手 #转接工程师 项目ID123 问题描述空调不制冷

🤖回复：
项目ID 123 已转接给工程师
问题: 空调不制冷
```

#### 命令：标记完成
```
@智能助手 #问题已解决

🤖回复：
问题已标记为已解决
```

---

## 🔄 完整工作流程示例

### 流程1：售后工单处理

```
步骤1：系统自动推送（无需@）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【自动创建工单】🔧
工单号：SV20240202001
客户：张三（13800138000）
项目：中央空调安装
问题：空调不制冷
处理状态：待分配
创建时间：2024-02-02 14:30

📋 工单详情：https://xxx/secure/project/abc123

请相关人员尽快处理。@全体成员

💡 后续操作（需要@机器人）：
员工回复：@智能助手 /分配工单 SV20240202001 @李工
员工查询：@智能助手 /查询工单 SV20240202001
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

步骤2：销售经理响应（需要@）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
销售经理：@智能助手 /分配工单 SV20240202001 @李工

🤖回复：
工单 SV20240202001 已分配给 @李工
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

步骤3：工程师查询（需要@）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
李工：@智能助手 /查询工单 SV20240202001

🤖回复：
工单号：SV20240202001
客户：张三（13800138000）
问题：空调不制冷
状态：处理中
负责人：李工
创建时间：2024-02-02 14:30
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

步骤4：处理完成后（需要@）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
李工：@智能助手 #问题已解决

🤖回复：
问题已标记为已解决
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

### 流程2：客户服务请求处理（非联系人）

```
步骤1：系统自动推送（无需@）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🚨 【客户服务请求 - 需要验证】
请求单号：REQ20240202123456ABC
请求类型：查询订单（NORMAL）
客户姓名：赵六
客户电话：13600136000
客户身份：prospect（商机用户）

⚠️ 温馨提示：
该客户不是项目123的联系人

可能原因：
• 项目联系人变更了
• 客户记错了项目编号
• 需要添加为额外联系人

请销售顾问核实处理

💡 处理完成后（需要@机器人）：
记录客户：@智能助手 #记录客户 手机号13600136000 意向产品XX
查询进度：@智能助手 #查询进度 手机号13600136000
添加联系人：@智能助手 /添加联系人 项目123 手机13600136000 姓名赵六 角色联系人
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

步骤2：销售核实后（需要@）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
销售顾问：@智能助手 #查询进度 手机号13600136000

🤖回复：
未找到手机号 13600136000 的项目记录
建议先记录客户信息或添加为现有项目的联系人
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

步骤3：销售添加联系人（需要@）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
销售顾问：@智能助手 /添加联系人 项目123 手机13600136000 姓名赵六 角色联系人

🤖回复：
已为项目123添加联系人：
姓名：赵六
手机：13600136000
角色：联系人

该联系人现在可以查询和提交该项目的售后工单
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

### 流程3：售前咨询跟进

```
步骤1：系统自动推送（无需@）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【新客户咨询】💼
客户：李四
电话：13900139000
产品：中央空调
来源：微信公众号
时间：2024-02-02 15:20

请销售顾问及时跟进。@销售组

💡 快速操作（需要@机器人）：
记录跟进：@智能助手 #记录客户 手机号13900139000 意向产品中央空调
查询客户：@智能助手 #查询进度 手机号13900139000
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

步骤2：销售记录跟进（需要@）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
销售顾问：@智能助手 #记录客户 手机号13900139000 意向产品中央空调

🤖回复：
已记录客户 13900139000，创建售前项目ID: 456
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

步骤3：后续查询（需要@）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
销售顾问：@智能助手 #查询进度 手机号13900139000

🤖回复：
手机号 13900139000 的项目进度：
- 项目ID 456: 中央空调 - 售前咨询 (contacted)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## ⚠️ 常见错误

### ❌ 错误1：忘记@机器人
```
员工：#查询进度 手机号13800138000

结果：无响应（因为没有@智能助手）
```

**正确做法**：
```
员工：@智能助手 #查询进度 手机号13800138000

🤖：[返回结果]
```

---

### ❌ 错误2：在自动推送消息后直接回复
```
【系统推送】
【自动创建工单】🔧
工单号：SV20240202001
...

员工直接回复：/分配工单 SV20240202001 @李工

结果：无响应（因为没有@智能助手）
```

**正确做法**：
```
员工：@智能助手 /分配工单 SV20240202001 @李工

🤖：工单已分配
```

---

### ❌ 错误3：命令格式错误
```
员工：@智能助手 添加联系人 项目123 李四 13900139000

结果：格式错误，无法识别
```

**正确做法**：
```
员工：@智能助手 /添加联系人 项目123 手机13900139000 姓名李四 角色技术负责人

🤖：已添加联系人
```

---

## 📊 命令速查表

| 功能分类 | 命令 | 格式 | 是否需要@ |
|---------|------|------|----------|
| **客户管理** | 记录客户 | `@智能助手 #记录客户 手机号XXX 意向产品XXX` | ✅ 必须 |
| | 查询进度 | `@智能助手 #查询进度 手机号XXX` | ✅ 必须 |
| **工单管理** | 创建工单 | `@智能助手 /创建工单 @客户XXX 问题:XXX` | ✅ 必须 |
| | 查询工单 | `@智能助手 /查询工单 工单号` | ✅ 必须 |
| | 分配工单 | `@智能助手 /分配工单 工单号 @员工` | ✅ 必须 |
| **联系人管理** | 添加联系人 | `@智能助手 /添加联系人 项目ID 手机XXX 姓名XXX 角色XXX` | ✅ 必须 |
| | 查询联系人 | `@智能助手 /查询联系人 项目ID` | ✅ 必须 |
| | 移除联系人 | `@智能助手 /移除联系人 项目ID 手机XXX` | ✅ 必须 |
| **其他** | 转接工程师 | `@智能助手 #转接工程师 项目ID 问题描述XXX` | ✅ 必须 |
| | 标记完成 | `@智能助手 #问题已解决` | ✅ 必须 |
| **系统推送** | 工单创建通知 | （系统自动推送） | ❌ 无需 |
| | 售前咨询通知 | （系统自动推送） | ❌ 无需 |
| | 服务请求通知 | （系统自动推送） | ❌ 无需 |

---

## 💡 核心要点

### ✅ 什么时候需要@智能助手？
1. **员工主动操作**：记录、查询、分配、添加等
2. **响应系统推送**：看到推送后想进一步操作
3. **所有命令执行**：无论什么命令，都需要@

### ❌ 什么时候不需要@智能助手？
1. **系统自动推送**：售后工单、售前咨询、服务请求自动推送到群
2. **仅阅读消息**：只看推送内容，不需要操作

### 🎯 记住这个规则
```
看到推送 → 想操作 → 必须@智能助手 + 命令
```

---

## 🚀 最佳实践

1. **及时响应推送**
   - 看到工单推送，立即@智能助手分配
   - 看到咨询通知，立即@智能助手记录

2. **善用查询命令**
   - 处理前先@智能助手查询客户信息
   - 了解客户历史项目和状态

3. **规范添加联系人**
   - 明确标注联系人角色
   - 及时更新项目联系人列表

4. **保持命令格式正确**
   - 按照速查表格式输入
   - 注意空格和参数顺序

---

## 📞 帮助与支持

如有疑问，在群里发送：
```
@智能助手 帮助
```

会返回完整命令列表和使用说明。

**记住：所有操作都需要@智能助手！** 🎯
