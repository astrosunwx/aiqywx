# 四种项目链接类型速查表

## 📋 四种链接类型快速对照表

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        四种项目链接类型配置对照表                            │
├────┬──────────┬────────────────────────────┬──────────────────┬────────────┤
│ # │  类型    │        URL模板             │   微信APP适配    │   使用场景 │
├────┼──────────┼────────────────────────────┼──────────────────┼────────────┤
│1️⃣ │ presale  │ /project/{id}?type=presale │ ✅ 完全适配      │ 商机通知   │
│   │ 售前商机 │ (商机详情、销售信息等)     │ • 响应式设计     │ 跟进提醒   │
│   │          │                            │ • 信息展示清晰   │ 成交预期   │
├────┼──────────┼────────────────────────────┼──────────────────┼────────────┤
│2️⃣ │ aftersales│ /project/{id}?type=       │ ✅ 完全适配      │ 工单状态   │
│   │ 售后工单 │ aftersales                 │ • 工程师可点拨号 │ 进度更新   │
│   │          │ (工单进度、工程师信息)     │ • 反馈表单易用   │ 完成通知   │
├────┼──────────┼────────────────────────────┼──────────────────┼────────────┤
│3️⃣ │ sales    │ /project/{id}?type=sales   │ ✅ 完全适配      │ 订单确认   │
│   │ 销售订单 │ (订单信息、支付状态)       │ • 产品列表清晰   │ 支付提醒   │
│   │          │                            │ • 地址完整显示   │ 发货通知   │
├────┼──────────┼────────────────────────────┼──────────────────┼────────────┤
│4️⃣ │ pay      │ /pay/{id}                  │ ✅ 完全适配      │ 在线支付   │
│   │ 在线支付 │ (支付页面)                 │ • 微信支付快速   │ 支付催付   │
│   │          │                            │ • 多种支付方式   │ 支付链接   │
└────┴──────────┴────────────────────────────┴──────────────────┴────────────┘
```

---

## 🎯 访问与配置

### 访问模板管理模块
```
📍 主入口：
   http://localhost:3000/config-center
   
👉 左侧菜单 → 🔧 配置中心 → 选择"模板管理"

⌨️ 快捷访问：
   Ctrl + K 搜索 "模板管理" (如支持)
```

### 四种链接类型配置位置
```
文件：frontend/src/views/TemplateManager.vue
行号：第135-138行 (链接类型选项)
行号：第149-186行 (URL提示和说明)
```

---

## 📱 各类型特点对比

### 1️⃣ 售前商机详情 (presale)

**用途：** 展示商机信息，发送给销售人员或客户

**包含信息：**
- 客户名称和联系方式
- 商机金额（预期成交额）
- 跟进记录
- 负责销售人员
- 预期成交日期
- 当前状态

**典型应用：**
```
销售总监：您有一个新商机等待处理
↓
点击链接 → 查看详细信息 → 分配工作
↓
销售顾问：获取商机信息 → 开始跟进
```

**手机微信显示：**
```
┌─────────────────────────┐
│  📊 商机详情             │
├─────────────────────────┤
│                         │
│  客户：张三              │
│  金额：¥50,000          │
│  进度：初期接触          │
│  销售：王五              │
│  时间：2024-01-20       │
│                         │
│  ┌─────────────────┐   │
│  │  查看详情  >>   │   │
│  └─────────────────┘   │
│                         │
└─────────────────────────┘
```

---

### 2️⃣ 售后工单详情 (aftersales)

**用途：** 展示工单进度，发送给客户和工程师

**包含信息：**
- 工单编号
- 故障/需求描述
- 处理进度
- 负责工程师
- 工程师电话
- 优先级
- 预期完成时间
- 客户评价和反馈表单

**典型应用：**
```
系统：工单已创建通知
↓
客户：收到通知 → 点击查看进度 → 了解处理情况
↓
系统：处理进度更新 → 客户收到通知
↓
客户：查看最新进度 → 提交评价
```

**手机微信显示：**
```
┌─────────────────────────┐
│  🔧 工单进度             │
├─────────────────────────┤
│                         │
│  工单号：TK20240115001   │
│  故障：屏幕闪烁          │
│  进度：处理中 ▓▓░░ 60%  │
│                         │
│  工程师：李四            │
│  电话：[☎ 13800138000]  │
│                         │
│  预计：今天下午5点       │
│                         │
│  ┌─────────────────┐   │
│  │  查看详情  >>   │   │
│  └─────────────────┘   │
│                         │
└─────────────────────────┘
```

---

### 3️⃣ 销售订单详情 (sales)

**用途：** 展示订单信息，发送给买家

**包含信息：**
- 订单编号
- 下单时间
- 客户信息
- 订单金额
- 支付状态
- 收货地址
- 产品列表
- 物流信息
- 预计送达时间

**典型应用：**
```
系统：订单已创建
↓
买家：收到通知 → 点击查看订单 → 完成支付
↓
系统：订单已发货通知
↓
买家：查看物流进度 → 等待收货
```

**手机微信显示：**
```
┌─────────────────────────┐
│  📦 订单详情             │
├─────────────────────────┤
│                         │
│  订单：ORD20240115001    │
│  时间：2024-01-15 14:30  │
│                         │
│  金额：¥2,999           │
│  状态：✓ 已支付         │
│  送达：2024-01-17       │
│                         │
│  收货地址：               │
│  北京市朝阳区XXX        │
│  李明 13912345678       │
│                         │
│  产品：                  │
│  □ 商品1 x2 ¥1,999     │
│  □ 商品2 x1 ¥1,000     │
│                         │
│  ┌─────────────────┐   │
│  │  查看详情  >>   │   │
│  └─────────────────┘   │
│                         │
└─────────────────────────┘
```

---

### 4️⃣ 在线支付 (pay)

**用途：** 直接进入支付页面

**包含信息：**
- 订单编号
- 订单金额
- 支付方式选择
- 支付状态
- 订单详情

**典型应用：**
```
客户：收到支付提醒
↓
点击链接 → 进入支付页面 → 选择支付方式
↓
使用微信支付/支付宝支付 → 支付成功
↓
系统：自动确认订单 → 准备发货
```

**手机微信显示：**
```
┌─────────────────────────┐
│  💳 支付确认             │
├─────────────────────────┤
│                         │
│  订单号：ORD20240115    │
│  金额：¥2,999           │
│                         │
│  支付方式：              │
│  [✓] 微信支付           │
│  [ ] 支付宝             │
│  [ ] 银行卡             │
│                         │
│  订单详情：              │
│  • 商品1 x2             │
│  • 商品2 x1             │
│                         │
│  ┌─────────────────┐   │
│  │ 确认支付 ¥2,999 │   │
│  └─────────────────┘   │
│                         │
│ ⚠️ 24小时内未支付       │
│   订单将自动取消        │
│                         │
└─────────────────────────┘
```

---

## 📊 链接类型与消息类型的搭配建议

```
消息类型            推荐链接类型          常见场景
─────────────────────────────────────────────────────────
短信               sales, pay            • 订单确认短信
                   aftersales            • 支付催促短信
                                        • 工单更新短信

邮件               presale               • 商机邮件报表
                   sales                 • 订单详情邮件
                   aftersales            • 工单完整信息

微信公众号         presale               • 商机推送
                   sales                 • 订单推送
                   aftersales            • 工单更新
                   pay                   • 支付催付

企业微信           presale               • 商机分配
                   aftersales            • 工单派遣
                   sales                 • 销售报表

AI机器人           aftersales            • 自动回复工单状态
                   status-query          • 快速查询项目状态

群机器人           sales                 • 订单通知群发
                   aftersales            • 工单通知群发
```

---

## 🔧 配置步骤速览

### ⚡ 5分钟快速配置

```
1️⃣ 打开：http://localhost:3000/config-center

2️⃣ 选择：模板管理 → 选择消息类型（如"微信公众号"）

3️⃣ 创建：点击"+ 新建模板"

4️⃣ 填写：
   • 模板名称：订单确认通知
   • 使用场景：订单通知
   • 链接类型：销售订单详情
   • 内容：写你的通知文案

5️⃣ 插入链接：点击下方提示标签快速插入URL

6️⃣ 保存：点击"保存"按钮

7️⃣ 启用：在列表中切换开关启用模板

✅ 完成！现在可以使用该模板发送通知
```

---

## 🔗 在模板内容中使用链接

### 写法1：纯链接（最简单）
```
您的订单：{order_id}
点击查看：http://localhost:3000/project/{order_id}?type=sales
```

### 写法2：文本 + 链接
```
尊敬的 {customer_name}，

您的订单 {order_id} 已确认，
总额 ¥{total_amount}

点击查看详情：
http://localhost:3000/project/{order_id}?type=sales
```

### 写法3：标记按钮（HTML邮件）
```html
尊敬的 {customer_name}，

您的订单已确认！

<table style="width:100%;">
  <tr>
    <td><strong>订单号：</strong> {order_id}</td>
    <td><strong>金额：</strong> ¥{total_amount}</td>
  </tr>
</table>

<a href="http://localhost:3000/project/{order_id}?type=sales" 
   style="display: inline-block; padding: 10px 20px; 
          background-color: #409EFF; color: white; 
          text-decoration: none; border-radius: 4px;">
  查看订单详情
</a>
```

---

## 📱 移动端访问需求

### 目前支持的环境
```
✅ 桌面浏览器：完全支持
✅ 手机浏览器：完全支持
✅ 微信内置浏览器：需配置公网域名
⚠️  企业微信APP：需配置可信域名
```

### 如需在微信中打开

**开发环境解决方案：**
```
使用ngrok内网穿透：

1. 安装ngrok（https://ngrok.com）

2. 运行命令：
   ngrok http 3000

3. 得到公网URL（如）：
   https://a1b2c3d4.ngrok.io

4. 在模板中使用该URL：
   https://a1b2c3d4.ngrok.io/project/{order_id}?type=sales

5. 在微信中测试链接
```

**生产环境解决方案：**
```
配置自己的域名：

1. 购买域名（如 example.com）

2. 配置服务器：
   - 指向服务器IP
   - 申请HTTPS证书

3. 在模板中使用：
   https://example.com/project/{order_id}?type=sales
```

---

## 📞 常见问题速答

| 问题 | 答案 |
|------|------|
| 在哪里配置？ | http://localhost:3000/config-center |
| 支持几种链接类型？ | 4种基础+status-query，共5种 |
| 可以自定义链接吗？ | 可以，选"自定义链接"输入任意URL |
| 本地可以在微信打开吗？ | 需要使用ngrok穿透或配置公网域名 |
| 支持哪些变量？ | {order_id}, {customer_name}等50+个 |
| 支持什么格式？ | 纯文本、HTML格式都支持 |
| 可以预览吗？ | 可以，点击"预览"按钮查看效果 |
| 支持定时发送吗？ | 支持，选择"定时推送"配置Cron表达式 |

---

## ✨ 使用建议

### 最佳实践
```
✅ DO:
• 使用有意义的模板名称
• 在内容中清楚标记链接
• 为重要链接添加按钮样式
• 定期测试模板效果
• 监控链接点击率

❌ DON'T:
• 创建太多相似模板
• 在URL中暴露敏感信息
• 忘记测试手机显示
• 使用超长链接
• 忘记启用模板后再发送
```

### 链接选择逻辑
```
如果要展示商机？        → 选择 presale
如果要展示工单？        → 选择 aftersales  
如果要展示订单？        → 选择 sales
如果只要支付页面？      → 选择 custom (pay)
如果要快速查询状态？    → 选择 status-query
```

---

## 📚 相关文档

```
文档列表：
├─ 消息模板配置指南-链接模块详解.md
│  └─ 详细的配置说明和使用指南
├─ 模板管理模块-快速访问指南.md  
│  └─ 快速开始步骤和示例
└─ 四种项目链接类型速查表.md (本文)
   └─ 快速查阅各种链接类型
```

---

## 🚀 立即开始

**现在就可以：**
```
1. 打开 http://localhost:3000/config-center
2. 进入模板管理
3. 创建你的第一个模板
4. 测试链接是否正常工作
5. 开始发送通知！
```

**就这么简单！** 😊

祝你使用愉快！
