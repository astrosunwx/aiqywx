# 🎯 智能工单系统 - 快速参考卡

## 📱 员工常用命令

### 创建工单
```
/创建工单 @客户张三 手机:13800138000 问题:服务器无法连接
```
**可选参数**：添加"紧急"、"严重"设置高优先级

---

### 查询工单
```
# 按客户名查询
/查询工单 客户张三

# 按手机号查询
/查询工单 手机13800138000

# 按工单号查询
/查询工单 #123
```

---

### 分配工单
```
/分配工单 #123 @李四
```

---

### 回复工单（自动更新状态）
```
# 标记已解决
#123 已解决，问题已修复

# 更新处理中
#123 已处理，正在测试

# 升级处理
#123 升级处理
```

---

## 🎨 工单卡片说明

### 状态图标含义

| 图标 | 状态 | 说明 |
|------|------|------|
| 🟡 | pending | 待分配 |
| 🔵 | assigned | 已分配 |
| 🟢 | processing | 处理中 |
| 🔴 | escalated | 已升级 |
| ✅ | resolved | 已解决 |
| ⚫ | closed | 已关闭 |

### 优先级图标

| 图标 | 优先级 | 处理时限 |
|------|--------|---------|
| ⬇️ | low | 72小时 |
| ➡️ | normal | 24小时 |
| ⬆️ | high | 12小时 |
| 🚨 | urgent | 6小时 |

---

## ⏰ 超时提醒机制

### 提醒级别

| 超时时长 | 图标 | @提醒对象 |
|---------|------|----------|
| 0-12小时 | ⚠️ | 负责人 |
| 12-24小时 | 🚨 | 负责人 |
| 24-48小时 | 🚨🚨 | 负责人+主管 |
| 48小时+ | 🚨🚨🚨 | @all |

### 催促频率

- 第1次：超时后立即提醒
- 第2次：超时2小时后再次提醒
- 第3次及以后：每2小时提醒一次

---

## 📊 典型工作流

### 流程1：新工单处理

```mermaid
客户反馈 → 员工创建工单 → 分配给负责人 → 处理完成 → 回复"已解决" → 自动关闭
```

**时间线**：
1. `00:00` - 创建工单（状态：pending）
2. `00:05` - 分配给李四（状态：assigned）
3. `01:30` - 李四开始处理（状态：processing）
4. `03:20` - 李四解决问题（状态：resolved）
5. `03:21` - 系统自动关闭工单（状态：closed）

---

### 流程2：超时工单处理

```mermaid
创建工单 → 24小时未处理 → 自动提醒 → 继续未处理 → 再次提醒 → 升级处理
```

**时间线**：
1. `Day 1 10:00` - 创建工单（期限：Day 2 10:00）
2. `Day 2 11:00` - 超时1小时，第1次提醒
3. `Day 2 13:00` - 超时3小时，第2次提醒
4. `Day 2 15:00` - 员工回复"#123 升级处理"
5. `Day 2 15:01` - 状态变更为escalated，@主管

---

## 🔍 快速排查问题

### Q1: 发送命令后没有反应？

**检查清单**：
- [ ] 命令格式是否正确（必须以 `/` 开头）
- [ ] 客户手机号是否11位数字
- [ ] 是否在配置的内部群发送

---

### Q2: 工单卡片没有推送到群？

**检查清单**：
- [ ] `GROUP_WEBHOOK_URL` 是否配置
- [ ] Webhook URL是否有效
- [ ] 后端服务是否正常运行

---

### Q3: 回复"已解决"后状态没有更新？

**注意事项**：
- ✅ 必须包含工单号：`#123 已解决`
- ❌ 错误格式：`已解决`（缺少工单号）
- ❌ 错误格式：`工单123已解决`（缺少#）

---

### Q4: 没有收到超时提醒？

**检查清单**：
- [ ] 定时任务是否启动（APScheduler）
- [ ] 工单期限是否已过
- [ ] 距上次提醒是否超过2小时

---

## 💡 最佳实践

### ✅ 推荐做法

1. **及时分配**：工单创建后5分钟内分配负责人
2. **进度更新**：每处理一个关键步骤回复更新进度
3. **详细描述**：问题描述尽量详细，便于追溯
4. **主动关联**：创建工单时查询客户历史，避免重复处理

### ❌ 避免做法

1. ❌ 长时间不分配工单（容易被遗忘）
2. ❌ 只在群里讨论，不回复工单消息（状态不同步）
3. ❌ 问题描述过于简单（"有问题"、"坏了"）
4. ❌ 忽略超时提醒（影响客户满意度）

---

## 📞 技术支持联系方式

**系统管理员**：XXX（企业微信：@管理员）  
**技术支持群**：智能售后助手技术群  
**API文档**：http://localhost:8000/docs

---

## 🎓 培训视频

- [ ] 如何创建工单（3分钟）
- [ ] 如何分配和处理工单（5分钟）
- [ ] 如何查询客户历史（2分钟）
- [ ] 超时提醒机制说明（3分钟）

---

**📌 打印本卡片贴在工位，随时查阅！**

版本：v1.0 | 更新日期：2026-02-01
